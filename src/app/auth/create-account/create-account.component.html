<div class="create-account-container">
  <div class="form-container" [formGroup]="form">
    <h2>Criar Nova Conta</h2>

    <!-- ========================== -->
    <!--        DADOS DO USUÁRIO    -->
    <!-- ========================== -->
    <div class="section" formGroupName="user">
      <h3>Dados do Usuário</h3>

      <div class="form-group">
        <input
          type="text"
          formControlName="name"
          placeholder="Nome completo"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            userGroup.get('name')?.touched && userGroup.get('name')?.invalid
          "
        >
          <span *ngIf="userGroup.get('name')?.errors?.['required']">
            Nome é obrigatório.
          </span>
          <span *ngIf="userGroup.get('name')?.errors?.['minlength']">
            Mínimo 3 caracteres.
          </span>
        </div>
      </div>

      <div class="form-group">
        <input
          type="email"
          formControlName="email"
          placeholder="Email do usuário"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            userGroup.get('email')?.touched && userGroup.get('email')?.invalid
          "
        >
          <span *ngIf="userGroup.get('email')?.errors?.['required']">
            Email é obrigatório.
          </span>
          <span *ngIf="userGroup.get('email')?.errors?.['email']">
            Email inválido.
          </span>
        </div>
      </div>

      <div class="form-group">
        <input
          type="password"
          formControlName="password"
          placeholder="Senha"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            userGroup.get('password')?.touched &&
            userGroup.get('password')?.invalid
          "
        >
          <span *ngIf="userGroup.get('password')?.errors?.['required']">
            Senha é obrigatória.
          </span>
          <span *ngIf="userGroup.get('password')?.errors?.['minlength']">
            Mínimo 6 caracteres.
          </span>
        </div>
      </div>
    </div>

    <!-- ========================== -->
    <!--     DADOS DA EMPRESA       -->
    <!-- ========================== -->
    <div class="section" formGroupName="employer">
      <h3>Dados da Empresa</h3>

      <div class="form-group">
        <input
          type="text"
          formControlName="razaoSocial"
          placeholder="Razão Social"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            employerGroup.get('razaoSocial')?.touched &&
            employerGroup.get('razaoSocial')?.invalid
          "
        >
          <span *ngIf="employerGroup.get('razaoSocial')?.errors?.['required']">
            Campo obrigatório.
          </span>
          <span *ngIf="employerGroup.get('razaoSocial')?.errors?.['minlength']">
            Mínimo 3 caracteres.
          </span>
        </div>
      </div>

      <div class="form-group">
        <input
          type="text"
          formControlName="nomeFantasia"
          placeholder="Nome Fantasia"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            employerGroup.get('nomeFantasia')?.touched &&
            employerGroup.get('nomeFantasia')?.invalid
          "
        >
          <span *ngIf="employerGroup.get('nomeFantasia')?.errors?.['required']">
            Campo obrigatório.
          </span>
          <span
            *ngIf="employerGroup.get('nomeFantasia')?.errors?.['minlength']"
          >
            Mínimo 3 caracteres.
          </span>
        </div>
      </div>

      <div class="form-group">
        <input
          type="text"
          formControlName="cnpj"
          placeholder="CNPJ (somente números)"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            employerGroup.get('cnpj')?.touched &&
            employerGroup.get('cnpj')?.invalid
          "
        >
          <span *ngIf="employerGroup.get('cnpj')?.errors?.['required']">
            CNPJ é obrigatório.
          </span>
          <span *ngIf="employerGroup.get('cnpj')?.errors?.['pattern']">
            CNPJ inválido (precisa ter 14 números).
          </span>
        </div>
      </div>

      <div class="form-group">
        <input
          type="email"
          formControlName="email"
          placeholder="Email da empresa"
          class="form-input"
        />
        <div
          class="error"
          *ngIf="
            employerGroup.get('email')?.touched &&
            employerGroup.get('email')?.invalid
          "
        >
          <span *ngIf="employerGroup.get('email')?.errors?.['required']">
            Campo obrigatório.
          </span>
          <span *ngIf="employerGroup.get('email')?.errors?.['email']">
            Email inválido.
          </span>
        </div>
      </div>
    </div>

    <!-- BOTÕES -->
    <div class="button-group">
      <button class="back-button" (click)="goBack()" [disabled]="isLoading">
        Voltar
      </button>
      <button
        class="create-button"
        (click)="createAccount()"
        [disabled]="isLoading || form.invalid"
      >
        {{ isLoading ? "Criando..." : "Criar Conta" }}
      </button>
    </div>
  </div>
</div>
